<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="material">
    <select id="selectItemOrderRegisterNextMaterialOrderNum" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        SELECT
            CONCAT('MPO-', DATE_FORMAT(NOW(), '%Y%m%d'), '-',LPAD(COUNT(*)+1, 3, '0')) AS MATERIAL_ORDER_NUM
        FROM TBL_MATERIAL_ORDER
        WHERE 1=1
            AND DATE_FORMAT(INSERT_DT, '%Y%m%d') = DATE_FORMAT(NOW(), '%Y%m%d')
    </select>


    <select id="selectItemOrderRegisterList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        SELECT
            ROW_NUMBER () OVER () AS ROWNUM,
            A.CONTROL_SEQ, B.CONTROL_DETAIL_SEQ, F.MATERIAL_ORDER_SEQ, F.MATERIAL_ORDER_NUM,
            A.CONTROL_NUM, A.CONTROL_VER,
            A.ORDER_COMP_CD, SF_GET_COMP_NM(A.ORDER_COMP_CD) AS ORDER_COMP_NM,
            A.COMP_CD, SF_GET_COMP_NM(A.COMP_CD) AS ORDER_COMP_NM,
            A.CONTROL_STATUS, SF_GET_CODE_NM('1038', A.CONTROL_STATUS, 'EN') AS CONTROL_STATUS_NM,
            B.STATUS_DT, SF_GET_CODE_NM('1013', B.PART_STATUS, 'EN') AS PART_STATUS_NM,
            A.ORDER_STAFF_SEQ, B.PART_STATUS, B.DRAWING_NUM, B.DRAWING_VER, B.PART_NUM,
            B.MATERIAL_TYPE, B.MATERIAL_DETAIL, B.MATERIAL_KIND, B.SIZE_TXT, B.SIZE_TYPE, B.SIZE_W, B.SIZE_H, B.SIZE_D, B.SIZE_L,
            B.DWG_GFILE_SEQ, B.PDF_GFILE_SEQ, D.ORDER_DUE_DT, D.ORDER_QTY,
            F.MATERIAL_COMP_CD AS M_COMP_CD, SF_GET_COMP_NM(F.MATERIAL_COMP_CD) AS M_COMP_NM,
            F.ORDER_QTY AS M_ORDER_QTY, F.ORDER_NOTE AS M_ORDER_NOTE, F.SIZE_TXT AS M_SIZE_TXT, G.REQUEST_CD,
            F.ORDER_STATUS AS M_STATUS, SF_GET_CODE_NM('1028', F.ORDER_STATUS, 'EN') AS M_STATUS_NM,
            F.ORDER_DT AS M_ORDER_DT
        FROM TBL_CONTROL A
            INNER JOIN TBL_CONTROL_PART B ON A.CONTROL_SEQ = B.CONTROL_SEQ AND B.WORK_TYPE = 'WTP010'
                AND B.PART_STATUS = 'PRO002'
            INNER JOIN TBL_CONTROL_PART_ORDER D ON B.CONTROL_SEQ = D.CONTROL_SEQ AND B.CONTROL_DETAIL_SEQ = D.CONTROL_DETAIL_SEQ
            LEFT OUTER JOIN TBL_MATERIAL_ORDER F ON D.CONTROL_SEQ = F.CONTROL_SEQ AND F.CONTROL_DETAIL_SEQ = D.CONTROL_DETAIL_SEQ
            LEFT OUTER JOIN TBL_MATERIAL_ORDER_REQUEST G ON F.MATERIAL_ORDER_SEQ AND G.MATERIAL_ORDER_SEQ
        WHERE A.CONTROL_STATUS = 'ORD001'
        ORDER BY A.CONTROL_SEQ, B.CONTROL_DETAIL_SEQ, F.MATERIAL_ORDER_SEQ
    </select>

    <select id="selectItemOrderRegisterPopList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        SELECT
            ROW_NUMBER () OVER () AS ROWNUM,
            A.CONTROL_SEQ, B.CONTROL_DETAIL_SEQ, F.MATERIAL_ORDER_SEQ, F.MATERIAL_ORDER_NUM,
            A.CONTROL_NUM, A.CONTROL_VER,
            A.ORDER_COMP_CD, SF_GET_COMP_NM(A.ORDER_COMP_CD) AS ORDER_COMP_NM,
            A.COMP_CD, SF_GET_CODE_NM('1007', A.COMP_CD, 'EN') AS COMP_NM,
            A.CONTROL_STATUS, SF_GET_CODE_NM('1024', A.CONTROL_STATUS, 'EN') AS CONTROL_STATUS_NM,
            B.STATUS_DT, SF_GET_CODE_NM('1024', B.PART_STATUS, 'EN') AS PART_STATUS_NM,
            A.ORDER_STAFF_SEQ, B.PART_STATUS, B.DRAWING_NUM, B.DRAWING_VER, B.PART_NUM,
            CASE WHEN B.MATERIAL_TYPE IS NOT NULL THEN B.MATERIAL_TYPE
                ELSE SF_GET_ETC_CD('1000', B.MATERIAL_DETAIL)
            END MATERIAL_TYPE,
            CASE WHEN B.MATERIAL_TYPE IS NOT NULL THEN SF_GET_ETC_NM( '1000', B.MATERIAL_TYPE)
                ELSE SF_GET_ETC_NM('1000', B.MATERIAL_DETAIL)
            END MATERIAL_TYPE_NM,
            B.MATERIAL_DETAIL, B.MATERIAL_KIND, B.SIZE_TXT, B.SIZE_TYPE, B.SIZE_W, B.SIZE_H, B.SIZE_D, B.SIZE_L,
            B.DWG_GFILE_SEQ, B.PDF_GFILE_SEQ, D.ORDER_DUE_DT, D.ORDER_QTY,
            F.MATERIAL_COMP_CD AS M_COMP_CD, SF_GET_CODE_NM('1007', F.MATERIAL_COMP_CD, 'EN') AS M_COMP_NM,
            F.ORDER_QTY AS M_ORDER_QTY, F.ORDER_NOTE AS M_ORDER_NOTE, F.SIZE_TXT AS M_SIZE_TXT, G.REQUEST_CD
        FROM TBL_CONTROL A
            INNER JOIN TBL_CONTROL_PART B ON A.CONTROL_SEQ = B.CONTROL_SEQ AND B.WORK_TYPE = 'FCT01'
            INNER JOIN TBL_CONTROL_PART_ORDER D ON B.CONTROL_SEQ = D.CONTROL_SEQ AND B.CONTROL_DETAIL_SEQ = D.CONTROL_DETAIL_SEQ
            LEFT OUTER JOIN TBL_MATERIAL_ORDER F ON D.CONTROL_SEQ = F.CONTROL_SEQ AND F.CONTROL_DETAIL_SEQ = D.CONTROL_DETAIL_SEQ
            LEFT OUTER JOIN TBL_MATERIAL_ORDER_REQUEST G ON F.MATERIAL_ORDER_SEQ AND G.MATERIAL_ORDER_SEQ
        WHERE A.CONTROL_STATUS = 'PRO01'
            AND CONCAT(A.CONTROL_SEQ, B.CONTROL_DETAIL_SEQ) IN(${CONCAT_SEQ})
        ORDER BY A.CONTROL_SEQ, B.CONTROL_DETAIL_SEQ, F.MATERIAL_ORDER_SEQ
    </select>

    <insert id="updateItemOrderRegister" parameterType="java.util.HashMap">

    </insert>

    <update id="insertUpdateItemOrderRegister" parameterType="java.util.HashMap">
        INSERT INTO TBL_MATERIAL_ORDER
        (
            MATERIAL_ORDER_SEQ, MATERIAL_ORDER_NUM, CONTROL_SEQ, CONTROL_DETAIL_SEQ,
            MATERIAL_COMP_CD, HOPE_DUE_DT, SIZE_TXT,
            SIZE_TYPE, SIZE_W, SIZE_H, SIZE_T, SIZE_D, SIZE_L,
            MATERIAL_TYPE, MATERIAL_DETAIL, MATERIAL_KIND,
            ORDER_NOTE, ORDER_QTY, ORDER_AMT,
            ORDER_STATUS, ORDER_DT, IN_DT, CANCEL_DT,
            INSERT_DT, INSERT_ID, CANCEL_USER_ID
        )
        VALUES
        (
            <choose>
                <when  test="MATERIAL_ORDER_SEQ !='' and MATERIAL_ORDER_SEQ != null">
                    #{MATERIAL_ORDER_SEQ},
                </when>
                <otherwise>
                    NEXTVAL(SEQ_MATERIAL_ORDER),
                </otherwise>
            </choose>
             #{MATERIAL_ORDER_NUM}, #{CONTROL_SEQ}, #{CONTROL_DETAIL_SEQ},
            #{M_COMP_CD}, #{HOPE_DUE_DT}, #{M_SIZE_TXT},
            SF_GET_SIZE_TXT('SIZE_TYPE', #{M_SIZE_TXT}), SF_GET_SIZE_TXT('SIZE_W', #{M_SIZE_TXT}),
            SF_GET_SIZE_TXT('SIZE_H', #{M_SIZE_TXT}), SF_GET_SIZE_TXT('SIZE_T', #{M_SIZE_TXT}),
            SF_GET_SIZE_TXT('SIZE_D', #{M_SIZE_TXT}), SF_GET_SIZE_TXT('SIZE_L', #{M_SIZE_TXT}),
            #{MATERIAL_TYPE}, #{MATERIAL_DETAIL}, #{MATERIAL_KIND},
            #{M_ORDER_NOTE}, #{M_ORDER_QTY}, #{ORDER_AMT},
            #{ORDER_STATUS}, #{ORDER_DT}, #{IN_DT}, #{CANCEL_DT},
            #{INSERT_DT}, #{INSERT_ID}, #{CANCEL_USER_ID}
        )
        ON DUPLICATE KEY UPDATE
            MATERIAL_COMP_CD = #{M_COMP_CD},
            HOPE_DUE_DT = #{HOPE_DUE_DT},
            SIZE_TXT = #{M_SIZE_TXT},
            SIZE_TYPE = SF_GET_SIZE_TXT('SIZE_TYPE', #{M_SIZE_TXT}),
            SIZE_W = SF_GET_SIZE_TXT('SIZE_W', #{M_SIZE_TXT}),
            SIZE_H = SF_GET_SIZE_TXT('SIZE_H', #{M_SIZE_TXT}),
            SIZE_T = SF_GET_SIZE_TXT('SIZE_T', #{M_SIZE_TXT}),
            SIZE_D = SF_GET_SIZE_TXT('SIZE_D', #{M_SIZE_TXT}),
            SIZE_L = SF_GET_SIZE_TXT('SIZE_L', #{M_SIZE_TXT}),
            MATERIAL_TYPE = #{MATERIAL_TYPE},
            MATERIAL_DETAIL = #{MATERIAL_DETAIL},
            MATERIAL_KIND = #{MATERIAL_KIND},
            ORDER_NOTE = #{M_ORDER_NOTE},
            ORDER_QTY = #{M_ORDER_QTY},
            UPDATE_DT = NOW(),
            UPDATE_ID = NULL
    </update>

    <update id="insertUpdateItemOrderRegisterPopSave" parameterType="java.util.HashMap">
        INSERT INTO TBL_MATERIAL_ORDER
        (
            MATERIAL_ORDER_SEQ, MATERIAL_ORDER_NUM, CONTROL_SEQ, CONTROL_DETAIL_SEQ,
            MATERIAL_COMP_CD, HOPE_DUE_DT, SIZE_TXT,
            SIZE_TYPE, SIZE_W, SIZE_H, SIZE_T, SIZE_D, SIZE_L,
            MATERIAL_TYPE, MATERIAL_DETAIL, MATERIAL_KIND,
            ORDER_NOTE, ORDER_QTY, ORDER_AMT,
            ORDER_STATUS, ORDER_DT, IN_DT, CANCEL_DT,
            INSERT_DT, INSERT_ID, CANCEL_USER_ID
        )
        VALUES
        (
            <choose>
                <when  test="MATERIAL_ORDER_SEQ !='' and MATERIAL_ORDER_SEQ != null">
                    #{MATERIAL_ORDER_SEQ},
                </when>
                <otherwise>
                    NEXTVAL(SEQ_MATERIAL_ORDER),
                </otherwise>
            </choose>
             #{MATERIAL_ORDER_NUM}, #{CONTROL_SEQ}, #{CONTROL_DETAIL_SEQ},
            #{M_COMP_CD}, #{HOPE_DUE_DT}, #{M_SIZE_TXT},
            SF_GET_SIZE_TXT('SIZE_TYPE', #{M_SIZE_TXT}), SF_GET_SIZE_TXT('SIZE_W', #{M_SIZE_TXT}),
            SF_GET_SIZE_TXT('SIZE_H', #{M_SIZE_TXT}), SF_GET_SIZE_TXT('SIZE_T', #{M_SIZE_TXT}),
            SF_GET_SIZE_TXT('SIZE_D', #{M_SIZE_TXT}), SF_GET_SIZE_TXT('SIZE_L', #{M_SIZE_TXT}),
            #{MATERIAL_TYPE}, #{MATERIAL_DETAIL}, #{MATERIAL_KIND},
            #{M_ORDER_NOTE}, #{M_ORDER_QTY}, #{ORDER_AMT},
            'MST01', NOW(), #{IN_DT}, #{CANCEL_DT},
            #{INSERT_DT}, #{INSERT_ID}, #{CANCEL_USER_ID}
        )
        ON DUPLICATE KEY UPDATE
            MATERIAL_ORDER_NUM = #{MATERIAL_ORDER_NUM},
            MATERIAL_COMP_CD = #{M_COMP_CD},
            HOPE_DUE_DT = #{HOPE_DUE_DT},
            SIZE_TXT = #{M_SIZE_TXT},
            SIZE_TYPE = SF_GET_SIZE_TXT('SIZE_TYPE', #{M_SIZE_TXT}),
            SIZE_W = SF_GET_SIZE_TXT('SIZE_W', #{M_SIZE_TXT}),
            SIZE_H = SF_GET_SIZE_TXT('SIZE_H', #{M_SIZE_TXT}),
            SIZE_T = SF_GET_SIZE_TXT('SIZE_T', #{M_SIZE_TXT}),
            SIZE_D = SF_GET_SIZE_TXT('SIZE_D', #{M_SIZE_TXT}),
            SIZE_L = SF_GET_SIZE_TXT('SIZE_L', #{M_SIZE_TXT}),
            MATERIAL_TYPE = #{MATERIAL_TYPE},
            MATERIAL_DETAIL = #{MATERIAL_DETAIL},
            MATERIAL_KIND = #{MATERIAL_KIND},
            ORDER_NOTE = #{M_ORDER_NOTE},
            ORDER_QTY = #{M_ORDER_QTY},
            ORDER_STATUS = 'MST01',
            ORDER_DT = NOW(),
            UPDATE_DT = NOW(),
            UPDATE_ID = NULL
    </update>

    <select id="selectItemOrderHistoryList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        SELECT
            ROW_NUMBER () OVER () AS ROWNUM,
            MATERIAL_ORDER_SEQ, MATERIAL_ORDER_NUM,
            MATERIAL_COMP_CD, SF_GET_CODE_NM('1007', MATERIAL_COMP_CD, 'EN') AS MATERIAL_COMP_NM,
            SUM(ORDER_QTY) AS ORDER_QTY, ORDER_DT
        FROM TBL_MATERIAL_ORDER
        WHERE ORDER_STATUS IS NOT NULL
        GROUP BY MATERIAL_COMP_CD, MATERIAL_ORDER_NUM
        ORDER BY MATERIAL_ORDER_SEQ, MATERIAL_COMP_CD
    </select>

    <select id="selectItemOrderHistoryListDetail" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        SELECT * FROM
            (
                SELECT
                    A.MATERIAL_ORDER_SEQ, A.MATERIAL_ORDER_NUM, A.CONTROL_SEQ, A.CONTROL_DETAIL_SEQ,
                    A.MATERIAL_COMP_CD, HOPE_DUE_DT, A.SIZE_TXT,
                    A.MATERIAL_TYPE, A.MATERIAL_DETAIL, A.MATERIAL_KIND,
                    A.ORDER_NOTE, A.ORDER_QTY, A.ORDER_AMT,
                    INSPECT_MATERIAL_YN, INSPECT_SURFACE_YN, INSPECT_SIZE_YN, INSPECT_NOTE,
                    ORDER_STATUS, ORDER_DT,
                    IN_DT, CANCEL_DT,
                    A.INSERT_DT, A.INSERT_ID, A.UPDATE_DT, A.UPDATE_ID,
                    CANCEL_USER_ID
                FROM TBL_MATERIAL_ORDER A
                    INNER JOIN TBL_CONTROL_PART B ON A.CONTROL_SEQ = B.CONTROL_SEQ AND A.CONTROL_DETAIL_SEQ = B.CONTROL_DETAIL_SEQ
                UNION ALL
                SELECT
                    A.MATERIAL_ORDER_SEQ, A.MATERIAL_ORDER_NUM, A.CONTROL_SEQ, A.CONTROL_DETAIL_SEQ,
                    A.MATERIAL_COMP_CD, HOPE_DUE_DT, A.SIZE_TXT,
                    A.MATERIAL_TYPE, A.MATERIAL_DETAIL, A.MATERIAL_KIND,
                    A.ORDER_NOTE, A.ORDER_QTY, A.ORDER_AMT,
                    INSPECT_MATERIAL_YN, INSPECT_SURFACE_YN, INSPECT_SIZE_YN, INSPECT_NOTE,
                    ORDER_STATUS, ORDER_DT,
                    IN_DT, CANCEL_DT,
                    A.INSERT_DT, A.INSERT_ID, A.UPDATE_DT, A.UPDATE_ID,
                    CANCEL_USER_ID
                FROM TBL_MATERIAL_ORDER A
                WHERE NOT EXISTS ( SELECT * FROM TBL_CONTROL_PART
                                    WHERE A.CONTROL_SEQ = CONTROL_SEQ AND A.CONTROL_DETAIL_SEQ = CONTROL_DETAIL_SEQ)
            ) Z
        WHERE MATERIAL_ORDER_NUM = #{MATERIAL_ORDER_NUM}
            AND MATERIAL_COMP_CD = #{MATERIAL_COMP_CD}
        ORDER BY MATERIAL_ORDER_SEQ, MATERIAL_ORDER_NUM, MATERIAL_COMP_CD
    </select>

    <update id="updateItemOrderHistoryInspection" parameterType="java.util.HashMap">
        UPDATE TBL_MATERIAL_ORDER
        SET UPDATE_DT = NOW(),
        <if test="INSPECT_MATERIAL_YN != '' and INSPECT_MATERIAL_YN != null">
            INSPECT_MATERIAL_YN = #{INSPECT_MATERIAL_YN},
        </if>
        <if test="INSPECT_SURFACE_YN != '' and INSPECT_SURFACE_YN != null">
            INSPECT_SURFACE_YN = #{INSPECT_SURFACE_YN},
        </if>
        <if test="INSPECT_SIZE_YN != '' and INSPECT_SIZE_YN != null">
            INSPECT_SIZE_YN = #{INSPECT_SIZE_YN},
        </if>
        <if test="ORDER_AMT != '' and ORDER_AMT != null">
            ORDER_AMT = #{ORDER_AMT},
        </if>
        <if test="INSPECT_NOTE != '' and INSPECT_NOTE != null">
            INSPECT_NOTE = #{INSPECT_NOTE},
        </if>
            UPDATE_ID = NULL,
        WHERE MATERIAL_ORDER_SEQ = #{MATERIAL_ORDER_SEQ}
    </update>

    <update id="updateItemOrderStatus" parameterType="java.util.HashMap">
        UPDATE TBL_MATERIAL_ORDER
        SET UPDATE_DT = NOW(),
            ORDER_STATUS = #{ORDER_STATUS},
            UPDATE_ID = NULL
        WHERE MATERIAL_ORDER_SEQ = #{MATERIAL_ORDER_SEQ}
    </update>

    <select id="selectInWarehouseManageList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        SELECT
            ROW_NUMBER () OVER () AS ROWNUM,
            A.MY_MAT_STOCK_SEQ,
            A.MATERIAL_TYPE, SF_GET_CODE_NM(1035, A.MATERIAL_TYPE, 'EN') AS MATERIAL_TYPE_NM,
            A.MATERIAL_DETAIL, SF_GET_CODE_NM(1027, A.MATERIAL_DETAIL, 'EN') AS MATERIAL_DETAIL_NM,
            A.MATERIAL_KIND, SF_GET_CODE_NM(1029, A.MATERIAL_KIND, 'EN') AS MATERIAL_KIND_NM,
            A.SIZE_TXT, A.SIZE_TYPE, A.SIZE_W, A.SIZE_H, A.SIZE_T, A.SIZE_D, A.SIZE_L,
            A.WAREHOUSE_CD, SF_GET_CODE_NM(1049, A.WAREHOUSE_CD, 'EN') AS WAREHOUSE_NM,
            A.LOC_SEQ, B.LOC_NM,
            A.STOCK_QTY,
            A.NOTE
        FROM TBL_MY_MATERIAL_STOCK A
            INNER JOIN TBL_WAREHOUSE_LOCATION B ON A.WAREHOUSE_CD = B.WAREHOUSE_CD AND A.LOC_SEQ = B.LOC_SEQ
                AND B.DEL_YN = 'N'
        WHERE A.DEL_YN ='N'
        GROUP BY A.WAREHOUSE_CD, A.MATERIAL_KIND, A.MATERIAL_DETAIL, A.SIZE_TXT
    </select>

    <select id="selectInWarehouseManageListDetail" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        SELECT
            ROW_NUMBER () OVER () AS ROWNUM,
            A.MY_MAT_STOCK_SEQ,
            A.MATERIAL_TYPE, SF_GET_CODE_NM(1035, A.MATERIAL_TYPE, 'EN') AS MATERIAL_TYPE_NM,
            A.MATERIAL_DETAIL, SF_GET_CODE_NM(1027, A.MATERIAL_DETAIL, 'EN') AS MATERIAL_DETAIL_NM,
            A.MATERIAL_KIND, SF_GET_CODE_NM(1029, A.MATERIAL_KIND, 'EN') AS MATERIAL_KIND_NM,
            A.SIZE_TXT, A.SIZE_TYPE, A.SIZE_W, A.SIZE_H, A.SIZE_T, A.SIZE_D, A.SIZE_L,
            A.WAREHOUSE_CD, SF_GET_CODE_NM(1049, A.WAREHOUSE_CD, 'EN') AS WAREHOUSE_NM,
            A.LOC_SEQ, B.LOC_NM,
            A.STOCK_QTY,
            A.NOTE
        FROM TBL_MY_MATERIAL_STOCK A
            INNER JOIN TBL_WAREHOUSE_LOCATION B ON A.WAREHOUSE_CD = B.WAREHOUSE_CD AND A.LOC_SEQ = B.LOC_SEQ
                AND B.DEL_YN = 'N'
        WHERE A.DEL_YN ='N'
        GROUP BY A.WAREHOUSE_CD, A.MATERIAL_KIND, A.MATERIAL_DETAIL, A.SIZE_TXT
    </select>

    <select id="selectInWarehouseManageOutList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        SELECT
            ROW_NUMBER () OVER () AS ROWNUM,
            A.MY_MAT_STOCK_SEQ,
            A.MATERIAL_TYPE, SF_GET_CODE_NM(1035, A.MATERIAL_TYPE, 'EN') AS MATERIAL_TYPE_NM,
            A.MATERIAL_DETAIL, SF_GET_CODE_NM(1027, A.MATERIAL_DETAIL, 'EN') AS MATERIAL_DETAIL_NM,
            A.MATERIAL_KIND, SF_GET_CODE_NM(1029, A.MATERIAL_KIND, 'EN') AS MATERIAL_KIND_NM,
            A.SIZE_TXT, A.SIZE_TYPE, A.SIZE_W, A.SIZE_H, A.SIZE_T, A.SIZE_D, A.SIZE_L,
            A.WAREHOUSE_CD, SF_GET_CODE_NM(1049, A.WAREHOUSE_CD, 'EN') AS WAREHOUSE_NM,
            A.LOC_SEQ, B.LOC_NM,
            A.STOCK_QTY,
            A.NOTE
        FROM TBL_MY_MATERIAL_STOCK A
            INNER JOIN TBL_WAREHOUSE_LOCATION B ON A.WAREHOUSE_CD = B.WAREHOUSE_CD AND A.LOC_SEQ = B.LOC_SEQ
                AND B.DEL_YN = 'N'
        WHERE A.DEL_YN ='N'
        GROUP BY A.WAREHOUSE_CD, A.MATERIAL_KIND, A.MATERIAL_DETAIL, A.SIZE_TXT
    </select>

</mapper>